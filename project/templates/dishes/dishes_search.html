{% extends 'base.html' %}

{% load i18n %}
{% load static %}

{% block title %}{% trans "Поиск блюда" %}{% endblock %}


{% block content %}
<head> {{ new_dish_form.media }} </head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>


<div class="container pt-4">
  <div class="row">
    <h1>{% trans "Выберите что есть у вас в холодильнике" %}</h1>
    {% trans "Найти блюдо" as btn_text %}
    {% include "includes/form.html" with form=dishes_search_form btn_text=btn_text %}

      {% if dishes_dict %}
        <h1>{% trans "Вы можете приготовить" %}</h1>
        {% for dish, ingredients in dishes_dict.items %}
          <p>{% include "includes/dish_card.html"  with dish=dish %}
            {% if ingredients|length %}
              {% trans "Вам нужно докупить:" %} {% for ingredient in ingredients %} {{ ingredient }} {% endfor %}
            {% else %}
              {% trans "У вас есть все продукты. Начинаем готовить!" %}
            {% endif %}</p>
        {% endfor %}
      {% endif %}
      
      {% if message %}
        <h1>{{ message }}</h1>
      {% endif %}

    
  </div>
</div>
{% endblock %}
